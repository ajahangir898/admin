/** @type {import('tailwindcss').Config} */
const buildPalette = (variable, stops) =>
  Object.fromEntries(
    Object.entries(stops).map(([token, alpha]) => [
      token,
      `rgb(var(${variable}) / ${alpha})`
    ])
  );

const subtleScale = {
  50: 0.08,
  100: 0.16,
  200: 0.26,
  300: 0.38,
  400: 0.52
};

const vividScale = {
  500: 1,
  600: 0.9,
  700: 0.8,
  800: 0.7,
  900: 0.6
};

const buildStops = () => ({ ...subtleScale, ...vividScale });

export default {
  content: [
    './index.html',
    './App.tsx',
    './index.tsx',
    './components/**/*.{ts,tsx,js,jsx}',
    './pages/**/*.{ts,tsx,js,jsx}',
    './services/**/*.{ts,tsx,js,jsx}',
    './constants.ts',
    './types.ts'
  ],
  darkMode: 'class',
  safelist: [
    // Grid columns for dynamic layouts
    'grid-cols-2', 'grid-cols-3', 'grid-cols-4', 'grid-cols-5', 'grid-cols-6',
    // Status badge colors
    'bg-green-100', 'bg-green-500', 'text-green-800',
    'bg-red-100', 'bg-red-500', 'text-red-800',
    'bg-yellow-100', 'bg-yellow-500', 'text-yellow-800',
    'bg-blue-100', 'bg-blue-500', 'text-blue-800',
    // Dynamic spacing
    'p-2', 'p-4', 'p-6', 'm-2', 'm-4', 'm-6',
    // Common animations and transitions
    'transition-all', 'duration-300', 'ease-in-out'
  ],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter', 'system-ui', '-apple-system', 'sans-serif']
      },
      keyframes: {
        'slide-in-right': {
          '0%': { 
            opacity: '0',
            transform: 'translateX(100px)'
          },
          '100%': { 
            opacity: '1',
            transform: 'translateX(0)'
          }
        },
        'fade-in': {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' }
        },
        'marquee': {
          // Translate by -33.33% because the content is repeated 3x for seamless looping
          '0%': { transform: 'translateX(0)' },
          '100%': { transform: 'translateX(-33.33%)' }
        }
      },
      animation: {
        'slide-in-right': 'slide-in-right 0.5s ease-out forwards',
        'fade-in': 'fade-in 0.4s ease-in-out forwards',
        'marquee': 'marquee 12s linear infinite'
      },
      colors: {
        // Dynamic tenant theme colors - these map to CSS variables
        // that are set per-tenant in App.tsx
        green: buildPalette('--color-primary-rgb', buildStops()),
        blue: buildPalette('--color-tertiary-rgb', buildStops()),
        orange: buildPalette('--color-secondary-rgb', buildStops()),
        pink: buildPalette('--color-secondary-rgb', buildStops()),
        purple: buildPalette('--color-tertiary-rgb', buildStops()),
        
        // Semantic theme colors for easier usage
        primary: buildPalette('--color-primary-rgb', buildStops()),
        secondary: buildPalette('--color-secondary-rgb', buildStops()),
        tertiary: buildPalette('--color-tertiary-rgb', buildStops()),
        accent: buildPalette('--color-hover-rgb', buildStops()),
        surface: buildPalette('--color-surface-rgb', buildStops()),
        
        // Font color utility
        'theme-font': {
          DEFAULT: 'rgb(var(--color-font-rgb))',
          50: 'rgb(var(--color-font-rgb) / 0.08)',
          100: 'rgb(var(--color-font-rgb) / 0.16)',
          200: 'rgb(var(--color-font-rgb) / 0.26)',
          300: 'rgb(var(--color-font-rgb) / 0.38)',
          400: 'rgb(var(--color-font-rgb) / 0.52)',
          500: 'rgb(var(--color-font-rgb) / 1)',
          600: 'rgb(var(--color-font-rgb) / 0.9)',
          700: 'rgb(var(--color-font-rgb) / 0.8)',
          800: 'rgb(var(--color-font-rgb) / 0.7)',
          900: 'rgb(var(--color-font-rgb) / 0.6)',
        }
  },
  corePlugins: {
    // Disable utilities not used in the project for smaller bundle
    backdropBlur: false,
    backdropBrightness: false,
    backdropContrast: false,
    backdropGrayscale: false,
    backdropHueRotate: false,
    backdropInvert: false,
    backdropOpacity: false,
    backdropSaturate: false,
    backdropSepia: false,
    filter: false,
    blur: false,
    brightness: false,
    contrast: false,
    dropShadow: false,
    grayscale: false,
    hueRotate: false,
    invert: false,
    saturate: false,
    sepia: false,
    // Keep scroll utilities minimal  
    scrollMargin: false,
    scrollPadding: false,
    // Keep ring utilities minimal
    ringColor: false,
    ringOffsetColor: false,
    ringOffsetWidth: false,
    ringOpacity: false,
    ringWidth: false
  },
  plugins: []
};
